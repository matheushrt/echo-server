<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ECHO Bot</title>
  </head>
  style(type="text/css").
    html,
    body {
      width: 100vw;
      height: 100vh;
      display: flex;
    }

    iframe {
      margin: auto;
    }
  body

  //- Telegram Login Widget
  //- https://core.telegram.org/widgets/login
  script(
    async
    src="https://telegram.org/js/telegram-widget.js?7"
    data-telegram-login= botName
    data-size="large"
    data-onauth="onTelegramAuth(user)"
    data-request-access="write")
  script(type="text/javascript").
    function onTelegramAuth(user) {
      const allowSpotify = window.confirm(
        'ECHO Bot needs you to log in to your Spotify Account'
      );
      if (allowSpotify) {
        window.location.href = `${window.location.origin}/register?id=${user.id}`;
      }
    }
</html>
